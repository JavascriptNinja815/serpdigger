let previousId,previousMessage;function updateDOM(onLoad=!1){const $subtext=$("#subtext"),$planeIcon=$("#plane-icon"),$previousId=$(`#${previousId}`);function applyChanges(result){const $resultId=$(`#${result.id}`);previousId!==result.id&&($previousId.removeClass("fade-in"),$previousId.hide(),$resultId.addClass("fade-in"),$resultId.show(),previousId=result.id),previousMessage!==result.message&&setTimeout(()=>{$subtext.removeClass("fade-in"),$subtext.hide(),$subtext.html(result.message),$subtext.addClass("fade-in"),$subtext.show(),previousMessage=result.message},50)}const key=`BackgroundDJMResult${onLoad?"_ApplyOnLoad":""}`;chrome.storage.local.get(key,items=>{const result=items[key];result&&(("plane"!==previousId||"plane"===previousId&&"fly"!==result.response)&&applyChanges(result),("plane"===result.id||"plane"===previousId&&"fly"===result.response)&&($planeIcon.off("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"),"fly"!==result.response?$planeIcon.removeClass("float custom-shadow").addClass("flyaway linearShake").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",()=>{$planeIcon.addClass("custom-shadow float").removeClass("flyaway linearShake")}):"fly"===result.response&&($subtext.html(". . ."),$planeIcon.removeClass("flyaway linearShake float custom-shadow").addClass("flyaway pushOut").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",()=>{$planeIcon.addClass("custom-shadow float").removeClass("flyaway pushOut"),applyChanges(result)}))))})}chrome.storage.onChanged.addListener(()=>updateDOM()),document.addEventListener("DOMContentLoaded",()=>updateDOM(!0));